---
import { Picture } from "astro:assets";
import BaseLayout from '../layouts/BaseLayout.astro';
import '../styles/global.css';
import '../styles/subsystems.css';
import powertrain from '/images/subsystems/powertrain.jpg';
import chassis from '/images/subsystems/chassis.jpg';
import electronics from '/images/subsystems/electronics.jpg';
import steering from '/images/subsystems/steering.jpg';
import suspension from '/images/subsystems/suspension.jpg';
import control from '/images/subsystems/control.jpg';
import composites from '/images/subsystems/composites.jpg';

const subsystems = [
  {
    name: 'Powertrain',
    image: powertrain,
    description: `The powertrain is responsible for delivering horsepower from the Kohler 10HP engine to all four wheels. It begins with a continuously variable transmission (CVT) that adjusts the gear ratio dynamically and also functions as a clutch. From there, power travels through a custom-built gearbox and bevel gearbox. A spool in the rear gives us equal wheel speeds to handle the tough terrain, while CV joints and axles ensure reliable delivery of torque. In the frontl, we have U-Joint driveshafts going to our front differential to differentiate between the two steer wheels. Each year, we design and fabricate a new gearbox in-house, combining performance and precision.`
  },
  {
    name: 'Chassis',
    image: chassis,
    description: `The chassis forms the vehicle's backbone. Built from steel tubing and custom-welded during winter break, it's designed to balance strength, stiffness, and weight. Using CAD and simulation tools, the team optimizes the frame for impact protection, torsional rigidity, and mounting compatibility with other subsystems. Every curve, joint, and weld reflects a blend of theory, real-world data, and precision craftsmanship.`
  },
  {
    name: 'Electronics',
    image: electronics,
    description: `Electronics integrate data and diagnostics into every phase of the vehicle's lifecycle. We deploy sensors to measure speed, acceleration, suspension movement, and thermal performance. The insights drive design refinement and track performance. Our electronics also support safety systems like kill-switches and lighting, as well as a dashboard display giving drivers real-time data at a glance.`
  },
  {
    name: 'Steering',
    image: steering,
    description: `Steering ensures agile control and response across demanding terrain. Inputs from the steering wheel travel through the column to a rack-and-pinion assembly, which translates rotation into lateral motion. Tie rods then move the steering arms to change the front wheels' angle. This setup, combined with carefully tuned geometry, delivers high precision and driver confidence in tight turns and uneven trails.`
  },
  {
    name: 'Suspension',
    image: suspension,
    description: `Our vehicle features four-wheel independent suspension — SLA in the front and rear. This configuration maximizes stability and control during jumps, ruts, and steep inclines. From concept to fabrication, our suspension system relies on data collection, simulations, and field testing. Each part is optimized to improve ride quality, traction, and component longevity.`
  },
  {
    name: 'Control Systems',
    image: control,
    description: `Control Systems shape the user experience and safety of the vehicle. From ergonomic cockpit design that fits a wide range of body types to the precise layout of levers, pedals, and controls — this subsystem ensures the driver stays focused and responsive. The team also engineers a powerful braking system and integrates electronic interfaces, including data acquisition and driver feedback tools.`
  },
  {
    name: 'Composites',
    image: composites,
    description: `To reduce weight and increase strength, we fabricate custom body panels, seat structures, and protective covers using carbon fiber and ABS plastic. Our team designs molds, prepares materials, and uses vacuum bagging to ensure clean, lightweight, and durable results. This subsystem is where material science meets hands-on manufacturing.`
  }
];
---

<BaseLayout>
  <!-- Hero Section -->
  <section class="hero" style="--hero-img: url('/images/subsystems-hero.JPG');">
    <div class="hero-content">
      <h1 class="hero-title">Our Subsystems</h1>
      <p class="hero-sub">
          Pioneering in performance, safety, and innovation.
      </p>
    </div>
  </section>
  
  <!-- Description -->
  <section class="section">
    <p class="intro-text">
      At Stony Brook Motorsports, every component of our Baja SAE off-road vehicle is built from the ground up by passionate students. Our team is divided into seven core subsystems — each playing a critical role in performance, reliability, and innovation. Team members often collaborate across multiple subsystems, gaining a hands-on, interdisciplinary engineering experience.
    </p>

    <!-- Subsystem Blocks -->
    <div class="subsystems-container">
      {subsystems.map((subsystem, i) => (
        <div class="subsystem {i % 2 === 1 ? 'reverse' : ''}">
          <div class="subsystem-text center-text">
            <h3>{subsystem.name}</h3>
            <p>{subsystem.description}</p>
          </div>
          <div class="subsystem-image">
          <Picture 
            src={subsystem.image} 
            alt={`${subsystem.name} Subsystem`} 
            formats={['avif','webp','jpg']} 
            width={600} 
            height={400} 
          />
        </div>

        </div>
      ))}
    </div>
  </section>

  <!-- Fade-in animation on scroll -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const subsystems = document.querySelectorAll(".subsystem");

      const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
            observer.unobserve(entry.target);
          }
        });
      }, {
        threshold: 0.2
      });

      subsystems.forEach(s => observer.observe(s));
    });
  </script>
</BaseLayout>
